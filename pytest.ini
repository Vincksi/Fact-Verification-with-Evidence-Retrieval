# Pytest configuration

[pytest]
# Add current directory to python path for module discovery
pythonpath = .
# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Directories to search for tests
testpaths = tests

# Coverage options
addopts = 
    --verbose
    --cov=src
    --cov-report=html
    --cov-report=term-missing
    --cov-report=xml
    --cov-fail-under=0

# Warnings configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore:.*An issue occurred while importing.*:UserWarning
    ignore:.*builtin type SwigPy.*:DeprecationWarning
    ignore:.*builtin type swigvarlink.*:DeprecationWarning
    ignore:.*torch_geometric.distributed has been deprecated.*:DeprecationWarning

# Markers for organizing tests
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests

# Minimum Python version
minversion = 3.8

[coverage:run]
# Measure branch coverage in addition to statement coverage
branch = True

# Files to include in coverage
source = src

# Files to omit from coverage
omit = 
    */tests/*
    */test_*.py
    */__pycache__/*
    */venv/*
    */nlp_env/*
    setup.py

[coverage:report]
# Regexes for lines to exclude from consideration
exclude_lines =
    # Standard pragma
    pragma: no cover
    
    # Don't complain about missing debug-only code
    def __repr__
    
    # Don't complain if tests don't hit defensive assertion code
    raise AssertionError
    raise NotImplementedError
    
    # Don't complain if non-runnable code isn't run
    if __name__ == .__main__.:
    if __name__ == "__main__":
    
    # Don't complain about abstract methods
    @abstractmethod
    @abc.abstractmethod

# Output
precision = 2
show_missing = True

[coverage:html]
directory = htmlcov
